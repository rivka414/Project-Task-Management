<div class="comments-page">
  <div class="header">
    <button class="back-btn" [routerLink]="['/show-tasks', projectId()]">猬锔 专</button>
    <h1>注专转 砖 #{{ taskId() }}</h1>
  </div>

  <div class="add-comment-box">
    <textarea [ngModel]="newCommentText()" (ngModelChange)="newCommentText.set($event)"
      placeholder="转 注专 砖..." rows="3"></textarea>
    <button class="send-btn" (click)="sendComment()" [disabled]="!newCommentText()?.trim()">
      砖 注专 
    </button>
  </div>

  <div class="comments-container">
    <div class="comments-list">
      @for (comment of comments(); track comment.id) {
        <div class="comment-bubble">
          <div class="comment-meta">
            <span class="user-name"> {{ comment.user?.name || '专 爪转' }}</span>
            <span class="date">{{ comment.createdAt | date:'HH:mm dd/MM' }}</span>
          </div>
          <p class="comment-text">{{ comment.body }}</p>
        </div>
      }
      <div id="bottom-of-comments"></div>
    </div>
  </div>
</div>